<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Tubazioni ‚Äì ASME B36</title>
  <link rel="stylesheet" href="../../../css/style.css">
</head>

<body>

<div class="layout">

  <main class="main">

    <header class="topbar">
      <h1>üõ†Ô∏è Tubazioni ‚Äì ASME B36</h1>
    </header>

    <section class="cards">

      <div class="card engineering">

        <label>Diametro nominale (DN)</label>
        <select id="dnSelect"></select>

        <label>Schedule</label>
        <select id="schSelect"></select>

        <hr>

        <p><strong>Diametro esterno (OD):</strong> <span id="od"></span> mm</p>
        <p><strong>Spessore (t):</strong> <span id="thk"></span> mm</p>
        <p><strong>Diametro interno (ID):</strong> <span id="id"></span> mm</p>
        <p><strong>Peso:</strong> <span id="kgm"></span> kg/m</p>

      </div>

      <div class="card engineering">
        <img src="pipe-drawing.svg" style="width:100%">
      </div>

    </section>

  </main>

</div>

<script src="pipe-data.js"></script>
<script>
const dnSelect = document.getElementById("dnSelect");
const schSelect = document.getElementById("schSelect");

for (let dn in pipeData) {
  dnSelect.innerHTML += `<option>${dn}</option>`;
}

dnSelect.onchange = updateSchedules;
schSelect.onchange = updateValues;

function updateSchedules() {
  schSelect.innerHTML = "";
  const dn = dnSelect.value;
  for (let sch in pipeData[dn].schedules) {
    schSelect.innerHTML += `<option>${sch}</option>`;
  }
  updateValues();
}

function updateValues() {
  const dn = dnSelect.value;
  const sch = schSelect.value;
  const OD = pipeData[dn].OD;
  const t = pipeData[dn].schedules[sch].t;

  document.getElementById("od").innerText = OD;
  document.getElementById("thk").innerText = t;
  document.getElementById("id").innerText = (OD - 2*t).toFixed(2);
  document.getElementById("kgm").innerText =
    pipeData[dn].schedules[sch].kgm;
}

updateSchedules();
</script>

</body>
</html>
