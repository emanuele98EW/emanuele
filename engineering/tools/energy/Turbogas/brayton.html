<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Ciclo Brayton ‚Äì Cervello Online</title>

  <link rel="stylesheet" href="../../../css/style.css">

  <!-- MathJax (LaTeX) -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- STAMPA -->
  <style>
    @media print {
      body * {
        visibility: hidden;
      }
      .print-area, .print-area * {
        visibility: visible;
      }
      .print-area {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
      }
    }
  </style>
</head>

<body>

<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-logo">
      <img src="../../../assets/logo.png">
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">

    <div class="background-logo"></div>

    <header class="topbar">
      <div class="topbar-left">
        <img src="../../../assets/logo.png" class="topbar-logo">
        <h1>Ciclo Brayton</h1>
        <span id="clock" class="digital-clock"></span>
      </div>
    </header>

    <!-- TOOL -->
    <section class="tool">

      <!-- INPUT -->
      <div class="tool-card">
        <h2>Input</h2>

        <label>T‚ÇÅ [K]</label>
        <input type="number" id="T1" value="300">

        <label>Œ≤</label>
        <input type="number" id="beta" value="10">

        <label>k</label>
        <input type="number" id="k" value="1.4">

        <button onclick="calcola()">Calcola</button>
        <button onclick="window.print()">üñ®Ô∏è Stampa</button>
      </div>

      <!-- AREA STAMPABILE -->
      <div class="print-area">

        <!-- RELAZIONE -->
        <div class="tool-card">
          <h2>Relazione</h2>
          <p>
            $$
            T_{2,is} = T_1 \cdot \beta^{\frac{k-1}{k}}
            $$
          </p>
        </div>

        <!-- GRAFICO -->
        <div class="tool-card">
          <h2>Diagramma T‚Äìs (qualitativo)</h2>
          <canvas id="tsChart" height="200"></canvas>
        </div>

      </div>

      <!-- OUTPUT -->
      <div class="tool-card">
        <h2>Risultato</h2>
        <p id="output">‚Äî</p>
      </div>

    </section>

  </main>
</div>

<script>
let chart;

function calcola() {
  const T1 = parseFloat(document.getElementById("T1").value);
  const beta = parseFloat(document.getElementById("beta").value);
  const k = parseFloat(document.getElementById("k").value);

  const T2 = T1 * Math.pow(beta, (k - 1) / k);
  document.getElementById("output").innerText =
    "T‚ÇÇ,is = " + T2.toFixed(2) + " K";

  const s = [0, 1];
  const T = [T1, T2];

  if (chart) chart.destroy();

  chart = new Chart(document.getElementById("tsChart"), {
    type: "line",
    data: {
      labels: s,
      datasets: [{
        data: T,
        borderWidth: 2,
        fill: false,
        tension: 0
      }]
    },
    options: {
      plugins: { legend: { display: false } },
      scales: {
        x: { title: { display: true, text: "s" } },
        y: { title: { display: true, text: "T [K]" } }
      }
    }
  });
}
</script>

<script src="../../../js/main.js"></script>
</body>
</html>
